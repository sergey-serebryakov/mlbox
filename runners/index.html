
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation site for MLCube">
      
      
        <meta name="author" content="<mlcommons.org> mlcommons@googlegroups.com">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.3.0">
    
    
      
        <title>Runners - MLCube</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.fd896c8a.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#runners" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="MLCube" class="md-header__button md-logo" aria-label="MLCube" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MLCube
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Runners
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mlcommons/mlcube" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    mlcommons/mlcube
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="MLCube" class="md-nav__button md-logo" aria-label="MLCube" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    MLCube
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mlcommons/mlcube" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    mlcommons/mlcube
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/hello-world/" class="md-nav__link">
        Hello World
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/mnist/" class="md-nav__link">
        MNIST
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/concepts/" class="md-nav__link">
        MLCube concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/mlcube-configuration/" class="md-nav__link">
        MLCube configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/system-settings/" class="md-nav__link">
        System Settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/cli/" class="md-nav__link">
        Command Line Interface
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/create-mlcube/" class="md-nav__link">
        How to Create an MLCube
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Runners
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Runners" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Runners
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Runners
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Runners
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reference-mlcube-runners" class="md-nav__link">
    Reference MLCube runners
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#runner-commands" class="md-nav__link">
    Runner commands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#command-line-interface" class="md-nav__link">
    Command line interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-subsystem" class="md-nav__link">
    Configuration subsystem
  </a>
  
    <nav class="md-nav" aria-label="Configuration subsystem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mlcube-system-settings-file" class="md-nav__link">
    MLCube System settings file
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="docker-runner/" class="md-nav__link">
        Docker Runner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="singularity-runner/" class="md-nav__link">
        Singularity Runner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ssh-runner/" class="md-nav__link">
        SSH Runner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="kubernetes/" class="md-nav__link">
        Kubernetes Runner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="kubeflow/" class="md-nav__link">
        Kubeflow Runner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="gcp-runner/" class="md-nav__link">
        GCP Runner
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reference-mlcube-runners" class="md-nav__link">
    Reference MLCube runners
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#runner-commands" class="md-nav__link">
    Runner commands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#command-line-interface" class="md-nav__link">
    Command line interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-subsystem" class="md-nav__link">
    Configuration subsystem
  </a>
  
    <nav class="md-nav" aria-label="Configuration subsystem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mlcube-system-settings-file" class="md-nav__link">
    MLCube System settings file
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/mlcommons/mlcube/edit/master/docs/runners/index.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="runners">Runners<a class="headerlink" href="#runners" title="Permanent link">&para;</a></h1>
<p>MLCube runners run MLCube cubes on one or multiple platforms. Examples of platforms are Docker and Singularity 
containers, Kubernetes, remote hosts, virtual machines in the cloud, etc. Every runner has a fixed set of configuration
parameters that users can change to configure MLCubes and runners for their environments. Concretely, runners can take
information from three different sources:
- MLCube configuration files that are located in the root directory of each file-system based MLCube. Parameters in 
  these files configure generic parameters common for all environments, such as for instance, docker image names.
- MLCube system settings file that is located (by default) in the user home directory (<code>~/mlcube.yaml</code>). This file
  is created automatically, and can be used to configure parameters common for all MLCubes in a particular environments.
  They can include docker executable, GPU and CPU docker arguments, user SSH and cloud credentials, etc.
- Optionally, runners can use parameters defined in <code>platform</code> section of MLCube configuration file. This section 
  usually contains information about such requirements as memory and persistent storage requirements, number of
  accelerators etc.</p>
<p>MLCube standard requires that all runners implement mandatory functionality. All reference runners implement it.
Users can develop their own runners to meet their specific requirements, such as security, authentication and
authorization policies, and others.   </p>
<h2 id="reference-mlcube-runners">Reference MLCube runners<a class="headerlink" href="#reference-mlcube-runners" title="Permanent link">&para;</a></h2>
<p>Reference runners are:</p>
<ul>
<li><code>Docker Runner</code>: Runs cubes locally using docker runtime.  </li>
<li><code>GCP Runner</code>: Runs cubes in Google cloud.  </li>
<li><code>Kubernetes Runner</code>: Runs cubes in Kubernetes.  </li>
<li><code>Kubeflow Runner</code>: Runs cubes using Kubeflow.  </li>
<li><code>Singularity Runner</code>: Runs cubes using singularity runtime.    </li>
<li><code>SSH Runner</code>: Runs cubes on remote hosts. SSH Runner uses other runners, such as Docker or Singularity runners, to
  run cubes on remote hosts.  </li>
</ul>
<h2 id="runner-commands">Runner commands<a class="headerlink" href="#runner-commands" title="Permanent link">&para;</a></h2>
<p>Each runner exposes mandatory and optional functionality through a set of commands. This is similar to, for instance,
how Git implements its CLI (<code>git</code> followed by a specific command such as <code>checkout</code>, <code>pull</code>, <code>push</code> etc.). Mandatory
MLCube runner commands are <code>configure</code> and <code>run</code>:  </p>
<ul>
<li><code>configure</code>: Configure MLCube. Exact functionality depends on a runner type, but the goal is to ensure that 
  a cube is ready to run. The following are the examples of what can be done at configure phase: build docker or 
  singularity container, create python virtual environment, allocate and configure virtual machine in the cloud, copy
  cube to a remote host etc. Once configuration is successfully completed, it is assumed a runner can run that cube.  </li>
<li><code>run</code>: Run tasks defined in MLCube.  </li>
</ul>
<p>Reference runners recognize three parameters - mlcube, platform and task.</p>
<ul>
<li><code>mlcube</code>: Path to a cube root directory. In future versions, this can be a URI with a specific protocol. Runners
  could support various MLCube implementations (excluding reference directory-based) such as docker/singularity 
  containers, GitHub repositories, compressed archives and others.  </li>
<li><code>platform</code>: Name of a platform. By default, runners create standard platform configurations in MLCube system settings
  file with predefined names. Users can change those names and use them on a command line. For instance, they can have
  different names for an 8-way GPU server and a simple CPU-based server for SSH runner.  </li>
<li><code>task</code>: Name of a task, or comma-separated list of tasks.  </li>
</ul>
<h2 id="command-line-interface">Command line interface<a class="headerlink" href="#command-line-interface" title="Permanent link">&para;</a></h2>
<p>One way to run a MLCube is to follow the following template supported by all reference runners:
<div class="highlight"><pre><span></span><code>mlcube COMMAND --mlcube<span class="o">=</span>MLCUBE_ROOT_DIRECTORY --platform<span class="o">=</span>PLATFORM_NAME --task<span class="o">=</span>TASK_NAME
</code></pre></div></p>
<p>Example command to configure MNIST Docker-based MLCube:
<div class="highlight"><pre><span></span><code>mlcube configure --mlcube<span class="o">=</span>examples/mnist --platform<span class="o">=</span>docker
</code></pre></div></p>
<p>Example command to run two tasks implemented by the MNIST Docker-based MLCube:
<div class="highlight"><pre><span></span><code>mlcube run --mlcube<span class="o">=</span>examples/mnist --platform<span class="o">=</span>docker --task<span class="o">=</span>download
mlcube run --mlcube<span class="o">=</span>examples/mnist --platform<span class="o">=</span>docker --task<span class="o">=</span>train
</code></pre></div></p>
<h2 id="configuration-subsystem">Configuration subsystem<a class="headerlink" href="#configuration-subsystem" title="Permanent link">&para;</a></h2>
<p>Runners are configured using information from three different sources:</p>
<ul>
<li>The base configuration comes from the system settings file. By default, the location of this file is 
  <code>${HOME}/mlflow.yaml</code>. It is created automatically whenever a user runs <code>mlcube</code> command line tool. The purpose of
  this file is to provide system-wide configuration for runners that are specific to user and their environment. This
  is kind of information that should not generally present in MLCube configuration files (next item). It shoud include
  such information as docker executable (docker, sudo docker, nvidia-docker, podman, etc), docker-specific runtime
  arguments, user credentials for GCP and remote hosts, information about remote hosts etc.</li>
<li>The MLCube configuration file that is available with each MLCube cube. This file contains (as of now) such parameters,
  as docker and singularity image names, MLCube resource requirements and tasks. This information overrides information
  from system settings file.</li>
<li>Configuration that is provided on a command line. Users are allowed (but not encouraged) to override parameters on
  the fly when they run MLCube cubes.</li>
</ul>
<h3 id="mlcube-system-settings-file">MLCube System settings file<a class="headerlink" href="#mlcube-system-settings-file" title="Permanent link">&para;</a></h3>
<p>Example of MLCube system settings file (<code>${HOME}/mlcube.yaml</code>) is the following. As it was mentioned above, it is
created automatically by searching packages that start with <code>mlcube_</code>. Such packages must provide <code>get_runner_class</code>
function that must return a runner class derived from <code>Runner</code>. 
<div class="highlight"><pre><span></span><code><span class="c1"># This section maps a runner name to a runner package. This is one way how developers can plug in</span><span class="w"></span>
<span class="c1"># their custom runners. Python package, or this type of association, could be one of many ways to</span><span class="w"></span>
<span class="c1"># implement runners. </span><span class="w"></span>
<span class="nt">runners</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">docker</span><span class="p">:</span><span class="w">                      </span><span class="c1"># MLCube Docker reference runner</span><span class="w"></span>
<span class="w">    </span><span class="nt">pkg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlcube_docker</span><span class="w"></span>
<span class="w">  </span><span class="nt">gcp</span><span class="p">:</span><span class="w">                         </span><span class="c1"># MLCube Google Cloud Platform reference runner</span><span class="w"></span>
<span class="w">    </span><span class="nt">pkg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlcube_gcp</span><span class="w"></span>
<span class="w">  </span><span class="nt">k8s</span><span class="p">:</span><span class="w">                         </span><span class="c1"># MLCube Kubernetes reference runner</span><span class="w"></span>
<span class="w">    </span><span class="nt">pkg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlcube_k8s</span><span class="w"></span>
<span class="w">  </span><span class="nt">kubeflow</span><span class="p">:</span><span class="w">                    </span><span class="c1"># MLCube KubeFlow reference runner</span><span class="w"></span>
<span class="w">    </span><span class="nt">pkg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlcube_kubeflow</span><span class="w"></span>
<span class="w">  </span><span class="nt">singularity</span><span class="p">:</span><span class="w">                 </span><span class="c1"># MLCube Singularity reference runner</span><span class="w"></span>
<span class="w">    </span><span class="nt">pkg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlcube_singularity</span><span class="w"></span>
<span class="w">  </span><span class="nt">ssh</span><span class="p">:</span><span class="w">                         </span><span class="c1"># MLCube SSH reference runner</span><span class="w"></span>
<span class="w">    </span><span class="nt">pkg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlcube_ssh</span><span class="w"></span>
<span class="c1"># This section defines configurations for the above runners. It is a dictionary mapping platform</span><span class="w"></span>
<span class="c1"># name to a runner configuration. These names could be any names. For instance, users can have </span><span class="w"></span>
<span class="c1"># two platforms for an SSH runner pointing to two different remote hosts. The platform names are</span><span class="w"></span>
<span class="c1"># those passed to mlcube tool using `--platform` command line argument.</span><span class="w"></span>
<span class="nt">platforms</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="c1"># Docker runner configuration. The only parameter that is supposed to be present in MLCube</span><span class="w"></span>
<span class="w">  </span><span class="c1"># configuration files is image name (`image`). For other parameters, see Docker Runner</span><span class="w"></span>
<span class="w">  </span><span class="c1"># documentation page.</span><span class="w"></span>
<span class="w">  </span><span class="nt">docker</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">runner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${docker.image}</span><span class="w"></span>
<span class="w">    </span><span class="nt">docker</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker</span><span class="w"></span>
<span class="w">    </span><span class="nt">env_args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w"></span>
<span class="w">    </span><span class="nt">gpu_args</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">    </span><span class="nt">cpu_args</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">    </span><span class="nt">build_args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w"></span>
<span class="w">    </span><span class="nt">build_context</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span><span class="w"></span>
<span class="w">    </span><span class="nt">build_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Dockerfile</span><span class="w"></span>
<span class="w">    </span><span class="nt">build_strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pull</span><span class="w"></span>
<span class="w">  </span><span class="c1"># Google Cloud Platform runner. None of these configuration parameters are supposed to be </span><span class="w"></span>
<span class="w">  </span><span class="c1"># present in MLCube configuration files.  For other parameters, see GCP Runner documentation </span><span class="w"></span>
<span class="w">  </span><span class="c1"># page.</span><span class="w"></span>
<span class="w">  </span><span class="nt">gcp</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">runner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gcp</span><span class="w"></span>
<span class="w">    </span><span class="nt">gcp</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">project_id</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">zone</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">credentials</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">machine_type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">disk_size_gb</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">    </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">  </span><span class="c1"># Kubernetes runner. None of these configuration parameters are supposed to be present in </span><span class="w"></span>
<span class="w">  </span><span class="c1"># MLCube configuration files.  For other parameters, see Kubernetes Runner documentation page.</span><span class="w"></span>
<span class="w">  </span><span class="nt">k8s</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">runner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k8s</span><span class="w"></span>
<span class="w">    </span><span class="nt">pvc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${name}</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${docker.image}</span><span class="w"></span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>
<span class="w">  </span><span class="c1"># Kubeflow runner. None of these configuration parameters are supposed to be present in </span><span class="w"></span>
<span class="w">  </span><span class="c1"># MLCube configuration files.  For other parameters, see Kubeflow Runner documentation page.</span><span class="w"></span>
<span class="w">  </span><span class="nt">kubeflow</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">runner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubeflow</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${docker.image}</span><span class="w"></span>
<span class="w">    </span><span class="nt">pvc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">???</span><span class="w"></span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>
<span class="w">    </span><span class="nt">pipeline_host</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">  </span><span class="c1"># Singularity runner configuration. The only parameter that is supposed to be present in MLCube</span><span class="w"></span>
<span class="w">  </span><span class="c1"># configuration files is image name (`image`). For other parameters, see Singularity Runner</span><span class="w"></span>
<span class="w">  </span><span class="c1"># documentation page.</span><span class="w"></span>
<span class="w">  </span><span class="nt">singularity</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">runner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">singularity</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${singularity.image}</span><span class="w"></span>
<span class="w">    </span><span class="nt">image_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${runtime.workspace}/.image</span><span class="w"></span>
<span class="w">    </span><span class="nt">singularity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">singularity</span><span class="w"></span>
<span class="w">    </span><span class="nt">build_args</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--fakeroot</span><span class="w"></span>
<span class="w">    </span><span class="nt">build_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Singularity.recipe</span><span class="w"></span>
<span class="w">  </span><span class="c1"># SSH runner. None of these configuration parameters are supposed to be present in </span><span class="w"></span>
<span class="w">  </span><span class="c1"># MLCube configuration files.  For other parameters, see SSH Runner documentation page.</span><span class="w"></span>
<span class="w">  </span><span class="nt">ssh</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">runner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh</span><span class="w"></span>
<span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">    </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">    </span><span class="nt">remote_root</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">    </span><span class="nt">interpreter</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w"></span>
<span class="w">    </span><span class="nt">authentication</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w"></span>
<span class="c1"># Dedicated section to define future data `storage` layer. It&#39;s work in progress.</span><span class="w"></span>
<span class="nt">storage</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w"></span>
</code></pre></div></p>
<p>Users can and should update configuration parameters according to their environment. Also, please backup this file
regularly. One possibility is to move this file to a location that is regularly snapshoted. When non-standard path is
used, users must define a <code>MLCUBE_SYSTEM_SETTINGS</code> environment variable that points to this new location.</p>
<p>Users can also duplicate runner sections assigning names accordingly, like it was mentioned above. For instance,
users can have two ssh sections one for each different host:
<div class="highlight"><pre><span></span><code><span class="nt">platforms</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">my_dev_server_1</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">runner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Other parameters ...</span><span class="w"></span>
<span class="w">  </span><span class="nt">my_dev_server_2</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">runner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Other parameters ...</span><span class="w"></span>
</code></pre></div>
and then
<div class="highlight"><pre><span></span><code>mlcube run --mlcube<span class="o">=</span>. --task<span class="o">=</span>MY_TASK --platform<span class="o">=</span>my_dev_server_2
</code></pre></div></p>
<p>MLCube runtime provides minimal functionality to interact with system settings file:
<div class="highlight"><pre><span></span><code><span class="c1"># Print system settings file</span>
mlcube config --list

<span class="c1"># Query a value associated with the particular key</span>
mlcube config --get runners
mlcube config --get platforms.docker

<span class="c1"># Create a new fresh platform for this runner</span>
mlcube config --create-platform ssh my_dev_server_1
mlcube config --get platforms.my_dev_server_1

<span class="c1"># Rename platform</span>
mlcube config --rename-platform my_dev_server_1 my_dev_server_2
mlcube config --get platforms.my_dev_server_2

<span class="c1"># Remove platform from the system settings file</span>
mlcube config --remove-platform my_dev_server_2

<span class="c1"># Create a new platform copying configuration of one of existing platforms.</span>
mlcube config --copy-platform EXISTING_PLATFORM NEW_PLATFORM

<span class="c1">#  Rename existing runner</span>
mlcube config --rename-runner OLD_NAME NEW_NAME

<span class="c1"># Remove runner</span>
mlcube config --remove-runner NAME
</code></pre></div></p>
<blockquote>
<p>Removed standard runners (MLCube reference runners) will be recreated when mlcube runs next time.</p>
</blockquote>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../tutorials/create-mlcube/" class="md-footer__link md-footer__link--prev" aria-label="Previous: How to Create an MLCube" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              How to Create an MLCube
            </div>
          </div>
        </a>
      
      
        
        <a href="docker-runner/" class="md-footer__link md-footer__link--next" aria-label="Next: Docker Runner" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Docker Runner
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b028fd86.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.0f659f14.min.js"></script>
      
    
  </body>
</html>